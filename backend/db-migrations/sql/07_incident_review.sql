CREATE TABLE `protix`.`incident_review` ( `id` INT NOT NULL AUTO_INCREMENT, `incident_case_id` INT NOT NULL, `reviewed_by` INT NOT NULL, `before_status_id` INT NOT NULL, `after_status_id` INT NOT NULL, `comments` TEXT NOT NULL, `created_at` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, `created_by` INT NOT NULL, `updated_at` TIMESTAMP on update CURRENT_TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, `updated_by` INT NOT NULL, `is_active` BOOLEAN NOT NULL DEFAULT TRUE, PRIMARY KEY (`id`), INDEX (`is_active`), INDEX (`incident_case_id`), INDEX (`reviewed_by`), INDEX (`before_status_id`), INDEX (`after_status_id`), INDEX (`created_by`), INDEX (`updated_by`) ) ENGINE = InnoDB; ALTER TABLE `incident_review` ADD FOREIGN KEY (`after_status_id`) REFERENCES `status`(`id`) ON DELETE RESTRICT ON UPDATE RESTRICT; ALTER TABLE `incident_review` ADD FOREIGN KEY (`before_status_id`) REFERENCES `status`(`id`) ON DELETE RESTRICT ON UPDATE RESTRICT; ALTER TABLE `incident_review` ADD FOREIGN KEY (`created_by`) REFERENCES `user`(`id`) ON DELETE RESTRICT ON UPDATE RESTRICT; ALTER TABLE `incident_review` ADD FOREIGN KEY (`incident_case_id`) REFERENCES `incident_case`(`id`) ON DELETE RESTRICT ON UPDATE RESTRICT; ALTER TABLE `incident_review` ADD FOREIGN KEY (`reviewed_by`) REFERENCES `user`(`id`) ON DELETE RESTRICT ON UPDATE RESTRICT; ALTER TABLE `incident_review` ADD FOREIGN KEY (`updated_by`) REFERENCES `user`(`id`) ON DELETE RESTRICT ON UPDATE RESTRICT;